title: <<推荐系统实践>> 学习笔记
author: Liao Jiayi
tags:
  - 推荐系统
articleId: recommendations
categories: 读书和碎碎念
keywords:
  - recommendations
date: 2020-08-12 07:08:40
---

一本读了很长时间的书。书中的内容很多，对于我这种 "门外汉" 读的还是非常吃力。

# 前言

首先声明下自己是数据相关的工程出身，大部分时间都在和分布式计算引擎打交道，对于业务知之甚少，尤其是推荐这种垂直类的业务和工程。所以整本书读下来收获还是非常非常大，我看[知乎](https://www.zhihu.com/topic/20128448)和[豆瓣](https://book.douban.com/subject/10769749/)中很多对于本书的评价都说内容过于简单，真正有用处的是作者涉及到的引用文献，不过我觉得对于我当做课余读物来学习学习，还是足够了。

不管是业务知识还是业务知识，都对我有不少的帮助，先贴一下书的大纲：

(1) 好的推荐系统：介绍了不同场景下推荐系统的应用和评测方法
(2) 利用用户行为数据：从行为数据出发来实现推荐的算法
(3) 推荐系统冷启动问题：对于新手用户可以利用什么信息进行推荐
(4) 利用用户标签数据：熟悉的基于用户画像的推荐
(5) 利用上下文信息：利用时间、地点等信息
(6) 利用社交网络数据：基于社交关系的推荐方法
(7) 推荐系统实例：推荐系统的工程架构
(8) 评分预测问题：偏理论和学术，这部分暂时没有深度地看过

# 好的推荐系统

**在如今信息过载的时代，推荐系统的任务是联系用户和信息。**

换句话说，推荐系统是在庞大的信息库中，找到用户可能喜欢的信息，然后推送给用户。所以这里涉及到几个关键的问题：

1. 如何找到用户可能的兴趣点？
2. 如何涉及一个信息库可以存储如此多的信息，并且根据用户的兴趣点非常高效的搜索对应的信息？
3. 如何推送给用户？以什么形式推送给用户？

如果工程化地思考上述 3 个问题，得到的就是

1. 如何找特征？
2. 存储结构如何设计？
3. 产品形式？推荐的可解释性？

这些问题在后续的章节都有不同的解释，在这里我认为其最核心的部分就是找特征了，找特征需要非常强的工程思维和业务敏感度，就像作者项亮在很多知乎回答中提到，一个算法从业人员最重要的能力就是了解业务的能力。

好的推荐系统从以下几个方面考量：

* 准确率和召回率：推荐系统中常用的指标，不做解释。
* 流行度：可以使用物品次数对数的值，流行度越大，说明推荐的商品越接近热门商品。
* 覆盖率：推荐给用户的所有商品占总商品总数的比例，若是 100%，则说明所有商品都至少推荐给了一个用户。如果需要更加准确些，可以加上商品流行度倒数的因子。

# 利用用户行为数据

## 基于用户的协同过滤

主要包含两个步骤：

(1) 找到和目标用户兴趣相似的用户集合。
(2) 找到这个集合中的用户喜欢的，且目标用户没有听说过的物品推荐给目标用户。

这里的关键点就是计算两个用户的兴趣相似度。

![r-user](http://www.liaojiayi.com/assets/recommendations_user.jpg)

* N(u) 表示用户 u 购买的商品集合

但是这样会导致购买了热门商品的用户，本身并无共同兴趣但是被误认为有同一兴趣，所以我们需要在这里将商品的流行度加入到公式中来。也就是说，越是流行的物品，我们需要降低这一物品在计算相似度时的权重，可以使用购买 x 物品的人数来表示 x 物品的流行度，并使用流行度的倒数作为权重因子。因为流行度满足长尾分布，我们使用对数让数据变得更加均匀。

![r-user](http://www.liaojiayi.com/assets/recommendations-user-weight.jpg)

## 基于物品的协同过滤

主要包含两个步骤：

(1) 计算物品的相似度。
(2) 基于该用户的历史行为，推荐该用户没有听说过的物品。

![r-x1](http://www.liaojiayi.com/assets/recommendations-good.jpg)

* N(i) 表示购买 i 商品的用户集合

同样，对于活跃的用户，我们需要降低异常活跃用户带来的权重，可以以用户 u 购买的商品来表示用户 u 的活跃度。

## 基于图的模型

用户 u 购买商品 i 的行为，可以以 (u, i) 二元组表示，从而形成一个无向图，这样，用户和物品，用户和用户，物品和物品之间的关系就联系了起来。


![r-x2](http://www.liaojiayi.com/assets/recommendations-graph.jpeg)

如图所示，若需要给用户 A 进行物品推荐，即可以用户 A 为节点，以 x 的概率随机游走，那么离用户 A 越远的物品被访问的概率就越小，通过多次实验迭代可以得出一个相对准确的访问概率，然后通过排序推荐给用户 A。

* 如果转换为矩阵求解则可以提供更加实时的计算结果。


# 推荐系统冷启动问题

Doing...














